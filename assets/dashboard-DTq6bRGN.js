import{j as q,k as E,C as z,l as G,r as p,s as y,D as I,E as Y,G as B,c,a as e,b as w,y as h,n as r,q as i,v as d,H as k,I as J,p as K,F as Q,o as u,A as X}from"./index-_wxWPFXE.js";import{f as Z}from"./format-cwXK75ha.js";const N=q({id:"member-progress",state:()=>({memberProgress:[],loading:!1,error:null,success:null}),actions:{async fetchMemberProgress(g){try{this.loading=!0;const n=await E.get("/member-progress",{params:g});n.data.data.forEach(l=>{l.date=Z(new Date(l.date),"dd MMMM yyyy")}),this.memberProgress=n.data.data}catch(n){this.handleError(n)}finally{this.loading=!1}},async createMemberProgress(g){try{this.loading=!0;const n=await E.post("/member-progress",g);this.success=n.data.message,z.push({name:"member-progress"})}catch(n){this.error=G(n)}finally{this.loading=!1}}}}),ee={class:"sub-banner-section"},se={class:"banner-section"},te={class:"container"},oe={class:"row"},ae={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},ne={class:"banner-section-content"},le=e("h1",null,"Dashboard Member",-1),re={class:"container"},ie={class:"menu-section"},de=e("div",{class:"menu-section-mini-header"}," Your Program ",-1),ce={class:"menu-section-plan-free"},ue={class:"container"},me={class:"menu-section"},_e=e("div",{class:"menu-section-header"}," Your Progress ",-1),pe={class:"row mb-3 p-2 align-items-center"},he={class:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},ge={class:"form-group"},fe=e("label",{for:"start_date"},"Start Date",-1),ve={class:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},be={class:"form-group"},ye=e("label",{for:"end_date"},"End Date",-1),we={key:0,class:"menu-section-plan-free"},ke={key:1,class:"menu-section-plan-free"},Me=e("i",{class:"fa-solid fa-plus"},null,-1),xe={class:"container"},Ce={class:"menu-section"},De=e("div",{class:"menu-section-mini-header"}," Your plan ",-1),Se={key:0,class:"menu-section-plan-free"},Pe={key:1,class:"menu-section-plan-free"},Fe={key:2,class:"menu-section-plan-description"},Ve={key:3,class:"menu-section-plan-description"},Ae={class:"menu-section"},Ue=e("div",{class:"menu-section-header"}," Membership ",-1),$e=e("span",{class:"icon"},[e("i",{class:"fa-solid fa-clock-rotate-left"})],-1),Ee=e("span",{class:"chevron"},"›",-1),Ie={class:"menu-section"},Ye=e("div",{class:"menu-section-header"}," Exercise Schedule ",-1),Be=["src"],Ne=e("a",{href:"./attendance",class:"btn-schedule"}," Attendance ",-1),We={class:"menu-section"},Le=e("div",{class:"menu-section-header"}," Logout ",-1),Oe=e("span",{class:"icon"},[e("i",{class:"fa-solid fa-arrow-right-from-bracket"})],-1),He=e("span",{class:"chevron"},"›",-1),Te={key:0,class:"progress-modal"},Re={class:"progress-modal-content"},je=e("div",{class:"progress-modal-header"}," Add Progress ",-1),qe={class:"progress-modal-body"},ze={class:"form-group"},Ge=e("label",{for:"date"},"Date",-1),Je={class:"form-group"},Ke=e("label",{for:"weight"},"Weight",-1),Qe={class:"form-group"},Xe=e("label",{for:"bodyfat"},"Bodyfat",-1),Ze={class:"form-group"},es=e("label",{for:"muscle"},"Muscle Mass",-1),ss={class:"form-group"},ts=e("label",{for:"cell"},"Cell Age",-1),os={class:"form-group"},as=e("label",{for:"fat"},"Fat ",-1),ns={class:"form-group"},ls=e("label",{for:"note"},"Note",-1),rs={class:"progress-modal-footer"},cs={__name:"dashboard",setup(g){const n=p(!0),{user:l}=y(I()),{webConfiguration:W}=y(Y()),{fetchWebConfiguration:L}=Y();L();const{memberProgress:m}=y(N()),{fetchMemberProgress:O,createMemberProgress:H}=N(),f=p({chart:{type:"line",height:350},stroke:{curve:"smooth"},markers:{size:0},dataLabels:{enabled:!1},tooltip:{y:{formatter:function(o,{seriesIndex:s}){switch(s){case 0:return`${o} kg`;case 1:return`${o} %`;case 2:return`${o} kg`;case 3:return`${o}`;case 4:return`${o}`;default:return o}}}},series:[],xaxis:{categories:[]}}),b=async()=>{n.value=!0,await O(_.value),f.value.series=[{name:"Weight",data:m.value.map(o=>parseFloat(o.weight))},{name:"Body Fat",data:m.value.map(o=>parseFloat(o.body_fat))},{name:"Muscle Mass",data:m.value.map(o=>parseFloat(o.muscle_mass))},{name:"Cell Age",data:m.value.map(o=>parseFloat(o.cell_age))},{name:"Fat",data:m.value.map(o=>parseFloat(o.fat))}],f.value.xaxis.categories=m.value.map(o=>o.date),n.value=!1},_=p({start_date:new Date(new Date().getFullYear(),new Date().getMonth(),2).toISOString().slice(0,10),end_date:new Date(new Date().getFullYear(),new Date().getMonth()+1,1).toISOString().slice(0,10)});b();const v=p(!1),a=p({date:new Date().toISOString().slice(0,10),weight:"",body_fat:"",muscle_mass:"",cell_age:"",fat:"",note:""}),T=async()=>{await H(a.value),v.value=!1,a.value={date:new Date().toISOString().slice(0,10),weight:"",body_fat:"",muscle_mass:"",cell_age:"",fat:"",note:""},b()};return(o,s)=>{var M,x,C,D,S,P,F,V,A,U,$;const R=B("apexchart"),j=B("router-link");return u(),c(Q,null,[e("div",ee,[w(X),e("section",se,[e("div",te,[e("div",oe,[e("div",ae,[e("div",ne,[le,e("p",null," Welcome to your dashboard "+h((x=(M=r(l))==null?void 0:M.profile)==null?void 0:x.name),1)])])])])])]),e("div",re,[e("div",ie,[de,e("div",ce,h((D=(C=r(l))==null?void 0:C.goal)==null?void 0:D.name),1)])]),e("div",ue,[e("div",me,[_e,e("div",pe,[e("div",he,[e("div",ge,[fe,i(e("input",{type:"date",class:"form-control",id:"start_date","onUpdate:modelValue":s[0]||(s[0]=t=>_.value.start_date=t)},null,512),[[d,_.value.start_date]])])]),e("div",ve,[e("div",be,[ye,i(e("input",{type:"date",class:"form-control",id:"end_date","onUpdate:modelValue":s[1]||(s[1]=t=>_.value.end_date=t)},null,512),[[d,_.value.end_date]])])]),e("div",{class:"col-lg-4 col-md-4 col-sm-12 col-xs-12"},[e("button",{class:"btn-filter float-right",onClick:b},"Filter")])]),n.value?(u(),c("div",we," Loading ")):(u(),c("div",ke,[w(R,{type:"line",height:"350",options:f.value,series:f.value.series},null,8,["options","series"])])),e("button",{class:"btn-add-progress",onClick:s[2]||(s[2]=t=>v.value=!0)},[Me,k(" Add Progress ")])])]),e("div",xe,[e("div",Ce,[De,r(l).plan===null?(u(),c("div",Se," You don't have a membership ")):(u(),c("div",Pe,h((P=(S=r(l))==null?void 0:S.plan)==null?void 0:P.type)+" Sessions ",1)),r(l).plan===null?(u(),c("div",Fe," Contact coach for more information ")):(u(),c("div",Ve," Remaining sessions: "+h((V=(F=r(l))==null?void 0:F.plan)==null?void 0:V.remaining_sessions)+" / "+h((U=(A=r(l))==null?void 0:A.plan)==null?void 0:U.type),1))]),e("div",Ae,[Ue,w(j,{to:"/attendance-history",class:"menu-item"},{default:J(()=>[$e,k("Attendance History "),Ee]),_:1})]),e("div",Ie,[Ye,e("img",{src:($=r(W))==null?void 0:$.schedule_image_url,alt:"",class:"img-schedule"},null,8,Be),Ne]),e("div",We,[Le,e("a",{class:"menu-item",onClick:s[3]||(s[3]=t=>r(I)().logout())},[Oe,k("Logout "),He])])]),v.value?(u(),c("div",Te,[e("div",Re,[je,e("div",qe,[e("div",ze,[Ge,i(e("input",{type:"date",class:"form-control",id:"date","onUpdate:modelValue":s[4]||(s[4]=t=>a.value.date=t)},null,512),[[d,a.value.date]])]),e("div",Je,[Ke,i(e("input",{type:"number",class:"form-control",id:"weight","onUpdate:modelValue":s[5]||(s[5]=t=>a.value.weight=t),placeholder:"kg"},null,512),[[d,a.value.weight]])]),e("div",Qe,[Xe,i(e("input",{type:"number",class:"form-control",id:"bodyfat","onUpdate:modelValue":s[6]||(s[6]=t=>a.value.body_fat=t),placeholder:"%"},null,512),[[d,a.value.body_fat]])]),e("div",Ze,[es,i(e("input",{type:"number",class:"form-control",id:"muscle","onUpdate:modelValue":s[7]||(s[7]=t=>a.value.muscle_mass=t),placeholder:"kg"},null,512),[[d,a.value.muscle_mass]])]),e("div",ss,[ts,i(e("input",{type:"number",class:"form-control",id:"cell","onUpdate:modelValue":s[8]||(s[8]=t=>a.value.cell_age=t),placeholder:"numbers only"},null,512),[[d,a.value.cell_age]])]),e("div",os,[as,i(e("input",{type:"number",class:"form-control",id:"fat","onUpdate:modelValue":s[9]||(s[9]=t=>a.value.fat=t),placeholder:"numbers only"},null,512),[[d,a.value.fat]])]),e("div",ns,[ls,i(e("textarea",{class:"form-control",id:"note","onUpdate:modelValue":s[10]||(s[10]=t=>a.value.note=t)},null,512),[[d,a.value.note]])])]),e("div",rs,[e("button",{class:"btn-cancel",onClick:s[11]||(s[11]=t=>v.value=!1)}," Cancel "),e("button",{class:"btn-save",onClick:s[12]||(s[12]=t=>T())}," Save ")])])])):K("",!0)],64)}}};export{cs as default};
